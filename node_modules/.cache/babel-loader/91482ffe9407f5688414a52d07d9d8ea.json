{"ast":null,"code":"var _jsxFileName = \"/home/babi/Desktop/react/fire/src/App.js\";\nimport './App.css';\nimport React from \"react\";\nimport { HomePage } from './pages/homepage/homepage.component';\nimport { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';\nimport ShopPage from './pages/shoppage/shop.component';\nimport Header from './component/header/header.component';\nimport SignIn from './pages/signin/signin.component';\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils';\nimport { onSnapshot } from 'firebase/firestore';\nimport { Provider } from 'react-redux';\nimport store from './redux/store/store';\nimport { connect } from 'react-redux';\nimport { setCurrentUser } from './redux/user/user.action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.unsubscribeFromAuth = null;\n    this.state = {\n      currentUser: null\n    };\n  }\n\n  componentDidMount() {\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        const unsub = onSnapshot(userRef, doc => {\n          this.setState({\n            currentUser: {\n              id: doc.id,\n              ...doc.data()\n            }\n          }, () => {// console.log(\"current user:\", this.state)\n          });\n        });\n      }\n\n      this.setState({\n        currentUser: userAuth\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Provider, {\n      store: store,\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/shop\",\n            element: /*#__PURE__*/_jsxDEV(ShopPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 53\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/signin\",\n            element: /*#__PURE__*/_jsxDEV(SignIn, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(null)(App);","map":{"version":3,"names":["React","HomePage","BrowserRouter","Router","Routes","Route","Link","ShopPage","Header","SignIn","auth","createUserProfileDocument","onSnapshot","Provider","store","connect","setCurrentUser","App","Component","constructor","unsubscribeFromAuth","state","currentUser","componentDidMount","onAuthStateChanged","userAuth","userRef","unsub","doc","setState","id","data","componentWillUnmount","render","mapDispatchToProps","dispatch","user"],"sources":["/home/babi/Desktop/react/fire/src/App.js"],"sourcesContent":["import './App.css';\nimport React from \"react\";\nimport {HomePage} from './pages/homepage/homepage.component'\nimport { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';\nimport ShopPage from './pages/shoppage/shop.component';\nimport Header from './component/header/header.component'\nimport SignIn from './pages/signin/signin.component';\nimport {auth, createUserProfileDocument} from './firebase/firebase.utils';\nimport {onSnapshot} from 'firebase/firestore';\n\nimport {Provider} from 'react-redux';\nimport store from './redux/store/store';\nimport {connect} from 'react-redux';\nimport {setCurrentUser} from './redux/user/user.action'\n\nclass App extends React.Component{\n\n  constructor(){\n    super();\n    this.state = {\n      currentUser: null,\n\n    }\n  }\n  unsubscribeFromAuth = null\n\n  componentDidMount(){\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth){\n        const userRef = await createUserProfileDocument(userAuth);\n        const unsub = onSnapshot(userRef, (doc) =>{\n          this.setState({currentUser: {\n            id: doc.id,\n             ...doc.data()\n            }\n          },\n          () => {\n            // console.log(\"current user:\", this.state)\n          });\n        });\n        \n      }\n      this.setState({currentUser: userAuth});\n    });\n  }\n\n  componentWillUnmount(){\n    this.unsubscribeFromAuth();\n  }\n\n  render(){\n    return (\n        <Provider store={store}>\n          <Router>\n            <Header />\n             <Routes>\n                <Route exact path='/' element= {<HomePage/>}/>\n                <Route exact path='/shop' element= {<ShopPage/>}/>\n                <Route exact path='/signin' element= {<SignIn/>}/>\n             </Routes>\n          </Router>\n        </Provider>\n \n        );\n  }\n}\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n})\nexport default connect(null, )(App);\n"],"mappings":";AAAA,OAAO,WAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,QAAuB,qCAAvB;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,MAAlC,EAA0CC,KAA1C,EAAiDC,IAAjD,QAA6D,kBAA7D;AACA,OAAOC,QAAP,MAAqB,iCAArB;AACA,OAAOC,MAAP,MAAmB,qCAAnB;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,SAAQC,IAAR,EAAcC,yBAAd,QAA8C,2BAA9C;AACA,SAAQC,UAAR,QAAyB,oBAAzB;AAEA,SAAQC,QAAR,QAAuB,aAAvB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,cAAR,QAA6B,0BAA7B;;;AAEA,MAAMC,GAAN,SAAkBjB,KAAK,CAACkB,SAAxB,CAAiC;EAE/BC,WAAW,GAAE;IACX;IADW,KAObC,mBAPa,GAOS,IAPT;IAEX,KAAKC,KAAL,GAAa;MACXC,WAAW,EAAE;IADF,CAAb;EAID;;EAGDC,iBAAiB,GAAE;IACjB,KAAKH,mBAAL,GAA2BV,IAAI,CAACc,kBAAL,CAAwB,MAAMC,QAAN,IAAkB;MACnE,IAAIA,QAAJ,EAAa;QACX,MAAMC,OAAO,GAAG,MAAMf,yBAAyB,CAACc,QAAD,CAA/C;QACA,MAAME,KAAK,GAAGf,UAAU,CAACc,OAAD,EAAWE,GAAD,IAAQ;UACxC,KAAKC,QAAL,CAAc;YAACP,WAAW,EAAE;cAC1BQ,EAAE,EAAEF,GAAG,CAACE,EADkB;cAEzB,GAAGF,GAAG,CAACG,IAAJ;YAFsB;UAAd,CAAd,EAKA,MAAM,CACJ;UACD,CAPD;QAQD,CATuB,CAAxB;MAWD;;MACD,KAAKF,QAAL,CAAc;QAACP,WAAW,EAAEG;MAAd,CAAd;IACD,CAhB0B,CAA3B;EAiBD;;EAEDO,oBAAoB,GAAE;IACpB,KAAKZ,mBAAL;EACD;;EAEDa,MAAM,GAAE;IACN,oBACI,QAAC,QAAD;MAAU,KAAK,EAAEnB,KAAjB;MAAA,uBACE,QAAC,MAAD;QAAA,wBACE,QAAC,MAAD;UAAA;UAAA;UAAA;QAAA,QADF,eAEG,QAAC,MAAD;UAAA,wBACG,QAAC,KAAD;YAAO,KAAK,MAAZ;YAAa,IAAI,EAAC,GAAlB;YAAsB,OAAO,eAAG,QAAC,QAAD;cAAA;cAAA;cAAA;YAAA;UAAhC;YAAA;YAAA;YAAA;UAAA,QADH,eAEG,QAAC,KAAD;YAAO,KAAK,MAAZ;YAAa,IAAI,EAAC,OAAlB;YAA0B,OAAO,eAAG,QAAC,QAAD;cAAA;cAAA;cAAA;YAAA;UAApC;YAAA;YAAA;YAAA;UAAA,QAFH,eAGG,QAAC,KAAD;YAAO,KAAK,MAAZ;YAAa,IAAI,EAAC,SAAlB;YAA4B,OAAO,eAAG,QAAC,MAAD;cAAA;cAAA;cAAA;YAAA;UAAtC;YAAA;YAAA;YAAA;UAAA,QAHH;QAAA;UAAA;UAAA;UAAA;QAAA,QAFH;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADJ;EAaD;;AAjD8B;;AAmDjC,MAAMoB,kBAAkB,GAAGC,QAAQ,KAAK;EACtCnB,cAAc,EAAEoB,IAAI,IAAID,QAAQ,CAACnB,cAAc,CAACoB,IAAD,CAAf;AADM,CAAL,CAAnC;;AAGA,eAAerB,OAAO,CAAC,IAAD,CAAP,CAAgBE,GAAhB,CAAf"},"metadata":{},"sourceType":"module"}