{"ast":null,"code":"import _regeneratorRuntime from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/babi/Desktop/react/Smart-Cloth-Store/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import'./App.css';import React from\"react\";import{HomePage}from'./pages/homepage/homepage.component';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import ShopPage from'./pages/shoppage/shop.component';import Header from'./component/header/header.component';import SignIn from'./pages/signin/signin.component';import{auth,createUserProfileDocument}from'./firebase/firebase.utils';import{onSnapshot}from'firebase/firestore';import{connect}from'react-redux';import{setCurrentUser as _setCurrentUser}from'./redux/user/user.action';import{selectCurrentUser}from'./redux/user/user.selectors';import CheckoutPage from'./pages/checkout/checkout.component';import CategoryPage from'./pages/category/category.component';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unsubscribeFromAuth=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userAuth){var userRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=5;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;onSnapshot(userRef,function(doc){setCurrentUser(_objectSpread({id:doc.id},doc.data()));});case 5:setCurrentUser(userAuth);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubscribeFromAuth();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",element:/*#__PURE__*/_jsx(ShopPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",element:this.props.currentUser?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",element:/*#__PURE__*/_jsx(CheckoutPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/shop/:categoryId\",element:/*#__PURE__*/_jsx(CategoryPage,{})})]})]});}}]);return App;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{currentUser:selectCurrentUser(state)};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"names":["React","HomePage","BrowserRouter","Router","Routes","Route","Navigate","ShopPage","Header","SignIn","auth","createUserProfileDocument","onSnapshot","connect","setCurrentUser","selectCurrentUser","CheckoutPage","CategoryPage","App","unsubscribeFromAuth","props","onAuthStateChanged","userAuth","userRef","doc","id","data","currentUser","Component","mapStateToProps","state","mapDispatchToProps","dispatch","user"],"sources":["/home/babi/Desktop/react/Smart-Cloth-Store/src/App.js"],"sourcesContent":["import './App.css';\nimport React from \"react\";\nimport {HomePage} from './pages/homepage/homepage.component'\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport ShopPage from './pages/shoppage/shop.component';\nimport Header from './component/header/header.component'\nimport SignIn from './pages/signin/signin.component';\nimport {auth, createUserProfileDocument} from './firebase/firebase.utils';\nimport {onSnapshot} from 'firebase/firestore';\n\n\nimport {connect} from 'react-redux';\nimport {setCurrentUser} from './redux/user/user.action'\n\nimport {selectCurrentUser} from './redux/user/user.selectors'\n\nimport CheckoutPage from './pages/checkout/checkout.component';\nimport CategoryPage from './pages/category/category.component';\n\nclass App extends React.Component{\n\n  unsubscribeFromAuth = null\n\n  componentDidMount(){\n    const {setCurrentUser} = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth){\n        const userRef = await createUserProfileDocument(userAuth);\n        onSnapshot(userRef, (doc) =>{\n          setCurrentUser({\n            id: doc.id,\n             ...doc.data()\n          });\n       \n        });\n        \n      }\n      setCurrentUser(userAuth);\n    });\n  }\n\n  componentWillUnmount(){\n    this.unsubscribeFromAuth();\n  }\n\n  render(){\n    return (\n          <Router>\n            <Header />\n             <Routes>\n                <Route  path='/' element= {<HomePage/>}/>\n                <Route  path='/shop' element= {<ShopPage/>}/>\n                <Route exact path='/signin' element = {this.props.currentUser ? (<Navigate to='/'/>) : (<SignIn/>)}/>\n                <Route  exact path='/checkout' element= {<CheckoutPage/>}/>\n                <Route path={`/shop/:categoryId`} element={<CategoryPage/>} />\n\n             </Routes>\n          </Router> \n        );\n  }\n}\nconst mapStateToProps = (state) => ({\n  currentUser: selectCurrentUser(state)\n})\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(\n  mapStateToProps, \n    mapDispatchToProps)(App);\n\n"],"mappings":"+3BAAA,MAAO,WAAP,CACA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,qCAAvB,CACA,OAASC,aAAa,GAAIC,OAA1B,CAAkCC,MAAlC,CAA0CC,KAA1C,CAAiDC,QAAjD,KAAiE,kBAAjE,CACA,MAAOC,SAAP,KAAqB,iCAArB,CACA,MAAOC,OAAP,KAAmB,qCAAnB,CACA,MAAOC,OAAP,KAAmB,iCAAnB,CACA,OAAQC,IAAR,CAAcC,yBAAd,KAA8C,2BAA9C,CACA,OAAQC,UAAR,KAAyB,oBAAzB,CAGA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,cAAc,GAAdA,gBAAR,KAA6B,0BAA7B,CAEA,OAAQC,iBAAR,KAAgC,6BAAhC,CAEA,MAAOC,aAAP,KAAyB,qCAAzB,CACA,MAAOC,aAAP,KAAyB,qCAAzB,C,2FAEMC,I,2TAEJC,mB,CAAsB,I,gEAEtB,4BAAmB,CACjB,GAAOL,eAAP,CAAyB,KAAKM,KAA9B,CAAON,cAAP,CACA,KAAKK,mBAAL,CAA2BT,IAAI,CAACW,kBAAL,4FAAwB,iBAAMC,QAAN,oIAC7CA,QAD6C,+CAEzBX,0BAAyB,CAACW,QAAD,CAFA,QAEzCC,OAFyC,eAG/CX,UAAU,CAACW,OAAD,CAAU,SAACC,GAAD,CAAQ,CAC1BV,cAAc,gBACZW,EAAE,CAAED,GAAG,CAACC,EADI,EAERD,GAAG,CAACE,IAAJ,EAFQ,EAAd,CAKD,CANS,CAAV,CAH+C,OAYjDZ,cAAc,CAACQ,QAAD,CAAd,CAZiD,sDAAxB,+DAA3B,CAcD,C,oCAED,+BAAsB,CACpB,KAAKH,mBAAL,GACD,C,sBAED,iBAAQ,CACN,mBACM,MAAC,MAAD,yBACE,KAAC,MAAD,IADF,cAEG,MAAC,MAAD,yBACG,KAAC,KAAD,EAAQ,IAAI,CAAC,GAAb,CAAiB,OAAO,cAAG,KAAC,QAAD,IAA3B,EADH,cAEG,KAAC,KAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,OAAO,cAAG,KAAC,QAAD,IAA/B,EAFH,cAGG,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,SAAlB,CAA4B,OAAO,CAAI,KAAKC,KAAL,CAAWO,WAAX,cAA0B,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAA1B,cAAiD,KAAC,MAAD,IAAxF,EAHH,cAIG,KAAC,KAAD,EAAQ,KAAK,KAAb,CAAc,IAAI,CAAC,WAAnB,CAA+B,OAAO,cAAG,KAAC,YAAD,IAAzC,EAJH,cAKG,KAAC,KAAD,EAAO,IAAI,oBAAX,CAAkC,OAAO,cAAE,KAAC,YAAD,IAA3C,EALH,GAFH,GADN,CAaD,C,iBAxCe3B,KAAK,CAAC4B,S,EA0CxB,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,KAAD,QAAY,CAClCH,WAAW,CAAEZ,iBAAiB,CAACe,KAAD,CADI,CAAZ,EAAxB,CAGA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAAAC,QAAQ,QAAK,CACtClB,cAAc,CAAE,wBAAAmB,IAAI,QAAID,SAAQ,CAAClB,eAAc,CAACmB,IAAD,CAAf,CAAZ,EADkB,CAAL,EAAnC,CAIA,cAAepB,QAAO,CACpBgB,eADoB,CAElBE,kBAFkB,CAAP,CAESb,GAFT,CAAf"},"metadata":{},"sourceType":"module"}